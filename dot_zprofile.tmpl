# <<< Pre Block

# Kiro CLI pre block. Keep at the top of this file.
{{- if eq .chezmoi.os "darwin" }}
if [[ -f "${HOME}/Library/Application Support/kiro-cli/shell/zprofile.pre.zsh" ]]; then
  builtin source "${HOME}/Library/Application Support/kiro-cli/shell/zprofile.pre.zsh"
fi
{{- else if eq .chezmoi.os "linux" }}
if [[ -f "${HOME}/.local/share/kiro-cli/shell/zprofile.pre.zsh" ]]; then
  builtin source "${HOME}/.local/share/kiro-cli/shell/zprofile.pre.zsh"
fi
{{- end }}

# >>>
# <<< Environment Variables

export EDITOR="vim"
export PAGER="less"
export LANG="en_US.UTF-8"

# bat as pager
{{- if eq .chezmoi.os "darwin" }}
if command -v bat &> /dev/null; then
  export PAGER="bat"
fi
{{- else if eq .chezmoi.os "linux" }}
if command -v batcat &> /dev/null; then
  export PAGER="batcat"
elif command -v bat &> /dev/null; then
  export PAGER="bat"
fi
{{- end }}

{{- if eq .chezmoi.hostname "7cf34ded5d65" }}
# Python
export PYTHONWARNINGS="ignore::BrokenPipeError"
{{- end }}

# >>>
# <<< Path Configuration

# Local bin
if [[ -d "${HOME}/bin" ]]; then
  export PATH="${HOME}/bin:${PATH}"
fi

if [[ -d "${HOME}/.local/bin" ]]; then
  export PATH="${HOME}/.local/bin:${PATH}"
fi

{{- if eq .chezmoi.os "darwin" }}
# Homebrew
eval "$(/opt/homebrew/bin/brew shellenv)"

# LM Studio CLI
if [[ -d "${HOME}/.lmstudio/bin" ]]; then
  export PATH="${PATH}:${HOME}/.lmstudio/bin"
fi

# Obsidian
if [[ -d "/Applications/Obsidian.app/Contents/MacOS" ]]; then
  export PATH="${PATH}:/Applications/Obsidian.app/Contents/MacOS"
fi
{{- end }}

{{- if eq .chezmoi.hostname "7cf34ded5d65" }}
# AIM
if [[ -d "${HOME}/.aim/mcp-servers" ]]; then
  export PATH="${HOME}/.aim/mcp-servers:$PATH"
fi

# Toolbox
if [[ -d "${HOME}/.toolbox/bin" ]]; then
  export PATH="${HOME}/.toolbox/bin:${PATH}"
fi
{{- end }}

# >>>
# <<< Post Block

# Kiro CLI post block. Keep at the bottom of this file.
{{- if eq .chezmoi.os "darwin" }}
if [[ -f "${HOME}/Library/Application Support/kiro-cli/shell/zprofile.post.zsh" ]]; then
  builtin source "${HOME}/Library/Application Support/kiro-cli/shell/zprofile.post.zsh"
fi
{{- else if eq .chezmoi.os "linux" }}
if [[ -f "${HOME}/.local/share/kiro-cli/shell/zprofile.post.zsh" ]]; then
  builtin source "${HOME}/.local/share/kiro-cli/shell/zprofile.post.zsh"
fi
{{- end }}

# >>>
